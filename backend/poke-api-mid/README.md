# Poke Battle App Backend

The backend of the Poke Battle App is developed using Spring Boot and acts as a middleware between the PokéAPI and the frontend. It handles data retrieval from the PokéAPI, caches the data using Caffeine, and provides REST API endpoints for the frontend to consume.

## Technologies Used

- Spring Boot
- Java
- Caffeine (for caching)
- RESTful API

### Getting Started

1. Navigate to the `backend/poke-api-mid` directory:
    ```
    cd backend/poke-api-mid
    ```
2. Build the backend application:
    ```
    ./mvnw clean package
    ```
3. Run the backend application:
    ```
    ./mvnw spring-boot:run
    ```
4. The backend server will start running on `http://localhost:8080`.

## API Endpoints

### Battle Endpoint

- **URL:** `api/pokemon/battle`
- **Method:** `POST`
- **Description:** Simulates a pokemon battle between two pokemons.
- **Request Body:**
```json
{
 "pokemon1": "pikachu",
 "pokemon2": "charizard",
 "moveUrl": "https://pokeapi.co/api/v2/move/thunderbolt",
 "currentTurn": 2,
 "pokemon1Health": 100,
 "pokemon2Health": 150
}
```
- **Response Body:**
```json
{
  "pokemon1Health": 55,
  "pokemon2Health": 150,
  "winner": null,
  "moveEffect": "Inflicts regular damage.  Has a 10% chance to paralyze the target."
}
```
- Note: On every request, you need to send the latest health values for both Pokémon. When a winner is determined, the  `winner` field in the response will contain the `name` of the winning Pokémon as a string.

### Download Log File Endpoint

- **URL:** `/api/logs/download`
- **Method:** `GET`
- **Description:** Allows downloading the log file generated by the backend (responses and requests).
- **Response:** The log file will be downloaded as an attachment with the name `app.log`.